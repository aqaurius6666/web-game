(this["webpackJsonpweb-game"]=this["webpackJsonpweb-game"]||[]).push([[0],{45:function(e,t,c){},57:function(e,t,c){},59:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(18),s=c.n(a),r=(c(57),c(7)),o=(c(58),c(59),c(45),c(73)),i=c(82),l=c(83),j=c(79),d=c(80),u=c(48),b=Object(u.a)();var m=function(e){return e.text().then((function(t){var c=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&f.logout();var n=c&&c.message||e.statusText;return Promise.reject(n)}return c}))},h=c(81),g="https://our-web-game.herokuapp.com",O=new h.a(localStorage.getItem("account")),p=new h.a(localStorage.getItem("token")),f={login:function(e){var t=e.username,c=e.password;console.log(t,c);var n="".concat(g,"/api/authentication"),a={method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({username:t,password:c})};return fetch(n,a).then(m).then((function(e){var t=e.message,c=e.token,n=e.account;console.log(t),localStorage.setItem("account",JSON.stringify(n)),O.next(JSON.stringify(n)),localStorage.setItem("token",c),p.next(c)}))},logout:function(){localStorage.removeItem("token"),p.complete(),localStorage.removeItem("account"),O.complete(),b.push("/login"),window.location.reload()},register:function(e,t){var c="".concat(g,"/api/accounts"),n={method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({username:e,password:t})};return fetch(c,n).then(m).then((function(e){var t=e.message;console.log(t)}))},getCurrentTokenValue:function(){return p.value},getCurrentAccountValue:function(){return JSON.parse(O.value)},currentAccount:O.asObservable()};var x=c(1),v=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),o=Object(r.a)(s,2),u=o[0],b=o[1];Object(n.useEffect)((function(){a(f.getCurrentAccountValue())}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)(i.a,{className:"nav-bar-frame",children:[Object(x.jsx)("br",{}),Object(x.jsx)(i.a.Brand,{}),Object(x.jsx)(i.a.Toggle,{}),Object(x.jsx)(i.a.Collapse,{children:c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a.Link,{className:"col-md-8",href:"/",children:" Home"}),Object(x.jsxs)("div",{className:"nav-account-frame row",children:[Object(x.jsx)("a",{className:"col-md-3",onClick:function(e){return b(!0)},children:Object(x.jsx)("img",{width:"40px",height:"40px",src:"https://scontent-hkt1-1.xx.fbcdn.net/v/t1.6435-9/158085211_1100336053705102_5231267126405112858_n.jpg?_nc_cat=106&ccb=1-3&_nc_sid=8bfeb9&_nc_ohc=RNJuGosefWQAX8Y8mYa&_nc_ht=scontent-hkt1-1.xx&oh=caa7e7cf3b85131c1904f2ea1f97bce0&oe=60917E21",href:"https://scontent-hkt1-1.xx.fbcdn.net/v/t1.6435-9/158085211_1100336053705102_5231267126405112858_n.jpg?_nc_cat=106&ccb=1-3&_nc_sid=8bfeb9&_nc_ohc=RNJuGosefWQAX8Y8mYa&_nc_ht=scontent-hkt1-1.xx&oh=caa7e7cf3b85131c1904f2ea1f97bce0&oe=60917E21"})}),Object(x.jsxs)(j.a,{className:"col-md-6",id:"nav-dropdown-account",children:[Object(x.jsx)(j.a.Item,{className:"dropdown-item",href:"/profile",children:"Account"}),Object(x.jsx)(j.a.Divider,{className:"dropdown-item"}),Object(x.jsx)(j.a.Item,{className:"dropdown-item",href:"/login",onClick:function(e){f.logout(),a(void 0)},children:"Log out"})]})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a.Link,{href:"/register",children:" Register"}),Object(x.jsx)(l.a.Link,{href:"/login",children:" Login"})]})})]}),Object(x.jsx)(d.a,{show:u,onHide:function(){return b(!1)},children:Object(x.jsx)(d.a.Body,{children:Object(x.jsx)("img",{width:"100%",height:"100%",src:"https://scontent-hkt1-1.xx.fbcdn.net/v/t1.6435-9/158085211_1100336053705102_5231267126405112858_n.jpg?_nc_cat=106&ccb=1-3&_nc_sid=8bfeb9&_nc_ohc=RNJuGosefWQAX8Y8mYa&_nc_ht=scontent-hkt1-1.xx&oh=caa7e7cf3b85131c1904f2ea1f97bce0&oe=60917E21"})})})]})},w=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),o=Object(r.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)(""),d=Object(r.a)(j,2),u=d[0],m=d[1];return Object(x.jsxs)("div",{className:"base-contains",children:[Object(x.jsx)("div",{className:"header",children:"Register"}),Object(x.jsx)("div",{className:"content",children:Object(x.jsx)("div",{className:"form",children:Object(x.jsxs)("form",{className:"register-form",onSubmit:function(e){e.preventDefault(),function(){if(i===u)return!0;console.log("password not match")}()&&f.register(c,i).then((function(){b.push("/login"),window.location.reload()}))},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"username",children:" Username"}),Object(x.jsx)("input",{name:"username",placeholder:"username",onChange:function(e){return a(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password",children:" Password"}),Object(x.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(e){return l(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"rePassword",children:" rePassword"}),Object(x.jsx)("input",{type:"password",name:"rePassword",placeholder:"rePassword",onChange:function(e){return m(e.target.value)}})]}),Object(x.jsx)("div",{className:"footer",children:Object(x.jsx)("button",{type:"submit",className:"btn",children:"Register"})})]})})})]})},N=c(15),y=function(){return Object(x.jsx)("div",{children:"Loading ..."})},_=function(){return Object(x.jsx)("div",{className:"col-md-6 border border-primary",children:"It info"})},S=function(){var e=Object(n.useState)({username:String,password:String}),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),o=Object(r.a)(s,2),i=o[0],l=o[1];return i?Object(x.jsx)(y,{}):Object(x.jsxs)("div",{className:"border row login-frame",children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(!0),f.login(c).then((function(){l(!1),b.push("/"),window.location.reload()}))},className:"col-md-6 login-form",children:[Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{for:"username",className:"form-label",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"username","aria-describedby":"emailHelp",onChange:function(e){return a(Object(N.a)(Object(N.a)({},c),{},{username:e.target.value}))}})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{for:"password",className:"form-label",children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"password",onChange:function(e){return a(Object(N.a)(Object(N.a)({},c),{},{password:e.target.value}))}})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("br",{}),Object(x.jsx)(_,{})]})]})},C=function(){return Object(x.jsx)("div",{children:"404 NOT FOUND"})},T={getUser:function(){var e="".concat(g,"/api/account"),t={method:"GET",headers:{"Content-Type":"Application/json","x-access-token":f.getCurrentTokenValue()}};return fetch(e,t).then(m).then((function(e){return e.account}))},resetPassword:function(e){var t=e.old_password,c=e.password,n="".concat(g,"/api/account"),a={method:"PUT",headers:{"Content-Type":"Application/json","x-access-token":f.getCurrentTokenValue()},body:JSON.stringify({old_password:t,password:c})};return fetch(n,a).then(m).then((function(e){return e.message}))}};var k=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!0),o=Object(r.a)(s,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){var e=0;l(!0),T.getUser().then((function(t){a(t),console.log(t),1===++e&&l(!1)}))}),[]),i?Object(x.jsx)(y,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{children:["Username ",c.username]}),Object(x.jsx)("a",{href:"/profile/edit",children:"Edit"})]})},A=function(){var e=Object(n.useState)({password:String,conf_password:String,old_password:String}),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T.resetPassword(c).then(console.log),f.logout()},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:"Old password:"}),Object(x.jsx)("input",{type:"password",placeholder:!0,onChange:function(e){return a(Object(N.a)(Object(N.a)({},c),{},{old_password:e.target.value}))}}),Object(x.jsx)("div",{children:"New password:"}),Object(x.jsx)("input",{type:"password",placeholder:!0,onChange:function(e){return a(Object(N.a)(Object(N.a)({},c),{},{password:e.target.value}))}}),Object(x.jsx)("div",{children:"Conf password:"}),Object(x.jsx)("input",{type:"password",placeholder:!0,onChange:function(e){return a(Object(N.a)(Object(N.a)({},c),{},{conf_password:e.target.value}))}})]}),Object(x.jsx)("button",{type:"submit",children:"Submit"})]})},P={getGames:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,c={methods:"GET",headers:{"Application-Type":"Application/json"}};return fetch("".concat(g,"/api/games?page=").concat(e,"&limit=").concat(t),c).then(m).then((function(e){return{array:e.array,_pagination:e._pagination}}))},getTags:function(){return fetch("".concat(g,"/api/tags"),{methods:"GET",headers:{"Application-Type":"Application/json"}}).then(m).then((function(e){return e.array}))},getGamesByTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,c=arguments.length>2?arguments[2]:void 0,n={methods:"GET",headers:{"Application-Type":"Application/json"}};return fetch("".concat(g,"/api/games?tag=").concat(c,"&page=").concat(e,"&limit=").concat(t),n).then(m).then((function(e){return e}))},getGameByGid:function(e){return fetch("".concat(g,"/api/games/").concat(e),{methods:"GET",headers:{"Application-Type":"Application/json"}}).then(m).then((function(e){return e}))}};var E=function(e){var t=e.game;return Object(x.jsxs)("div",{className:"game-info-frame",children:[Object(x.jsx)("img",{src:t.image}),t.name]})},G=function(e){var t=e.tag;return Object(x.jsx)("a",{className:"tag-button btn",href:"/tags/".concat(t.name),children:t.name})},I=function(e){var t=e.game_tags,c=Object(n.useState)(),a=Object(r.a)(c,2),s=a[0],o=a[1],i=Object(n.useState)(!0),l=Object(r.a)(i,2),j=l[0],d=l[1];return Object(n.useEffect)((function(){var e=0;d(!0),t?(o(t.map((function(e,t){return{name:e}}))),d(!1)):P.getTags().then((function(e){o(e)})).finally((function(){1===++e&&d(!1)}))}),[t]),j?Object(x.jsx)(y,{}):Object(x.jsxs)("div",{className:"tag-category",children:[Object(x.jsx)("div",{className:"tag-category-header",children:"Tag category:"}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-5 col-md-5",children:s.slice(0,s.length/2).map((function(e,t){return console.log(e),Object(x.jsx)(G,{tag:e})}))}),Object(x.jsx)("div",{className:"col-lg-1 col-md-1"}),Object(x.jsx)("div",{className:"col-lg-5 col-md-5",children:s.slice(s.length/2,s.length).map((function(e,t){return Object(x.jsx)(G,{tag:e})}))})]})]})},J=function(e){var t=e.gid,c=Object(n.useState)(),a=Object(r.a)(c,2),s=a[0],o=a[1],i=Object(n.useState)(!0),l=Object(r.a)(i,2),j=l[0],d=l[1];return Object(n.useEffect)((function(){var e=0;d(!0),P.getGameByGid(t).then((function(t){o(t),1===++e&&d(!1)}))}),[t]),j?Object(x.jsx)(y,{}):Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-md-10 col-sm-10",children:[Object(x.jsx)("div",{children:Object(x.jsx)("iframe",{width:"90%",height:"500px",src:"https://www.youtube.com/embed/".concat(s.ytl),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})}),Object(x.jsx)("div",{children:"About this game"}),Object(x.jsx)("div",{children:"System requirement"}),Object(x.jsx)("div",{children:"More like this"}),Object(x.jsx)("div",{children:"Comment"})]}),Object(x.jsxs)("div",{className:"col-md-2 col-sm-2",children:[Object(x.jsx)(E,{game:s}),Object(x.jsx)(I,{game_tags:s.tags})]})]})},F=function(e){var t=e.game,c="/games/".concat(t.gid);return Object(x.jsx)("div",{className:"tab-game-frame",children:Object(x.jsxs)("a",{href:c,className:"row",children:[Object(x.jsx)("img",{src:t.image,alt:"img_".concat(t.name),className:"col-sm-4",height:"100px"}),Object(x.jsxs)("div",{className:"tab-game-content col-sm-8",children:[Object(x.jsx)("div",{className:"tab-game-name",children:t.name}),Object(x.jsxs)("div",{className:"tab-game-details",children:["Tags:",t.tags.map((function(e,t){return 0!==t?Object(x.jsxs)("span",{children:[", ",e]}):Object(x.jsxs)("span",{children:[" ",e]})}))]})]})]})})},R=c(49),B=c.n(R),D=function(e){var t=e.currentPage,c=e.itemPerPage,n=e.totalItem,a=e.pageRangeDisplayed,s=e.onChange;return Object(x.jsx)(B.a,{className:"pagination-bar",itemClass:"page-item",linkClass:"page-link",Pagination:!0,activePage:t,itemsCountPerPage:c,totalItemsCount:n,pageRangeDisplayed:a,onChange:s})},Y=function(e){var t=e.tag,c=e.page,a=Object(n.useState)([]),s=Object(r.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!0),j=Object(r.a)(l,2),d=(j[0],j[1]),u=Object(n.useState)(c),b=Object(r.a)(u,2),m=b[0],h=b[1],g=Object(n.useState)({}),O=Object(r.a)(g,2),p=O[0],f=O[1];return Object(n.useEffect)((function(){var e=0;function c(){1===++e&&d(!1)}d(!0),t?P.getGamesByTag(m,10,t).then((function(e){var t=e.array,c=e._pagination;i(t),f(c)})).finally(c):P.getGames(m,10).then((function(e){var t=e.array,c=e._pagination;i(t),f(c)})).finally(c)}),[t,m]),Object(x.jsx)("div",{className:"col-md-10",children:Object(x.jsxs)("div",{className:"col",children:[o.map((function(e,t){return Object(x.jsx)(F,{game:e})})),Object(x.jsx)("div",{className:"pagination-bar",children:Object(x.jsx)(D,{currentPage:m,itemPerPage:p._limit,totalItem:p._total,pageRangeDisplayed:7,onChange:h})})]})})},L=function(e){var t=e.tag;return Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-10 col-sm-10",children:Object(x.jsx)(Y,{tag:t})}),Object(x.jsx)("div",{className:"col-md-2 col-sm-2",children:Object(x.jsx)(I,{})})]})},U=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"row footer",children:[Object(x.jsx)("div",{className:"footer-content col-md-8",children:"\xa9 2021 Team"}),Object(x.jsx)("div",{className:"footer-link ",children:Object(x.jsx)("a",{href:"/about",children:"About"})})]})]})},V=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.a,{show:c,onHide:function(){return a(!1)},children:Object(x.jsx)(d.a.Body,{children:Object(x.jsx)("img",{width:"100%",height:"100%",src:"https://scontent-hkt1-1.xx.fbcdn.net/v/t1.6435-9/158085211_1100336053705102_5231267126405112858_n.jpg?_nc_cat=106&ccb=1-3&_nc_sid=8bfeb9&_nc_ohc=RNJuGosefWQAX8Y8mYa&_nc_ht=scontent-hkt1-1.xx&oh=caa7e7cf3b85131c1904f2ea1f97bce0&oe=60917E21"})})})})};var H=function(){var e=Object(n.useState)(f.getCurrentAccountValue()),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){f.currentAccount.subscribe((function(e){a(JSON.parse(e)),console.log(c)}))}),[]),Object(x.jsxs)("div",{className:"body",children:[Object(x.jsx)(v,{}),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{exact:!0,path:"/",component:L}),Object(x.jsx)(o.a,{exact:!0,path:"/test",component:V}),Object(x.jsx)(o.a,{exact:!0,path:"/login",component:S}),Object(x.jsx)(o.a,{exact:!0,path:"/register",component:w}),Object(x.jsx)(o.a,{exact:!0,path:"/profile",component:k}),Object(x.jsx)(o.a,{exact:!0,path:"/profile/edit",component:A}),Object(x.jsx)(o.a,{path:"/games/:gid",component:function(e){return Object(x.jsx)(J,{gid:e.match.params.gid})}}),Object(x.jsx)(o.a,{path:"/tags/:tag",component:function(e){return Object(x.jsx)(L,{tag:e.match.params.tag})}}),Object(x.jsx)(o.a,{path:"/",component:C})]})}),Object(x.jsx)(U,{})]})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,84)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};s.a.render(Object(x.jsx)(o.b,{history:b,children:Object(x.jsx)(H,{})}),document.getElementById("root")),Q()}},[[72,1,2]]]);
//# sourceMappingURL=main.60bc692d.chunk.js.map